<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>PedidoPronto - Sistema de Pedidos</title>
  </head>
  <body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="login-container">
      <div class="login-box">
        <h2>PedidoPronto</h2>
        <form id="loginForm">
          <input type="text" id="username" placeholder="Usuário" required />
          <input type="password" id="password" placeholder="Senha" required />
          <button type="submit">Entrar</button>
        </form>
      </div>
    </div>

    <!-- Sistema Principal (após login) -->
    <div id="mainSystem" class="hidden">
      <header class="header">
        <h1>PedidoPronto</h1>
        <nav>
          <span id="userInfo" style="color: white; margin-right: 15px"></span>
          <button id="caixaBtn" onclick="abrirCaixaModal()">
            Abrir/Fechar Caixa
          </button>
          <button id="historicoBtn" onclick="mostrarHistorico()">
            Histórico de Pedidos
          </button>
          <button id="cardapioBtn" onclick="mostrarCardapio()">Cardápio</button>
          <button id="clientesBtn" onclick="mostrarClientes()">Clientes</button>
          <button
            id="funcionariosBtn"
            class="admin-only"
            onclick="mostrarFuncionarios()"
          >
            Funcionários
          </button>
          <button
            id="relatoriosBtn"
            class="admin-only"
            onclick="mostrarRelatorios()"
          >
            Relatórios
          </button>
          <button onclick="logout()">Sair</button>
        </nav>
      </header>

      <div class="tab-container">
        <div class="tab-buttons">
          <button class="tab-button active" onclick="abrirTab('pedidosTab')">
            Pedidos
          </button>
          <button class="tab-button" onclick="abrirTab('caixaTab')">
            Caixa
          </button>
        </div>

        <!-- Aba de Pedidos -->
        <div id="pedidosTab" class="tab-content active">
          <div class="kanban">
            <div
              class="column"
              id="recebido"
              ondrop="drop(event)"
              ondragover="allowDrop(event)"
            >
              <h3>Recebido</h3>
            </div>
            <div
              class="column"
              id="preparo"
              ondrop="drop(event)"
              ondragover="allowDrop(event)"
            >
              <h3>Em Preparo</h3>
            </div>
            <div
              class="column"
              id="pronto"
              ondrop="drop(event)"
              ondragover="allowDrop(event)"
            >
              <h3>Pronto</h3>
            </div>
            <div
              class="column"
              id="entregue"
              ondrop="drop(event)"
              ondragover="allowDrop(event)"
            >
              <h3>Entregue</h3>
            </div>
          </div>
          <button onclick="adicionarPedidoModal()" class="atendente-only">
            Adicionar Pedido
          </button>
        </div>

        <!-- Aba de Caixa -->
        <div id="caixaTab" class="tab-content">
          <div class="caixa-info">
            <h2>Situação do Caixa</h2>
            <p>
              Status:
              <span id="caixa-status" class="caixa-fechado">FECHADO</span>
            </p>
            <p>Saldo Inicial: R$ <span id="saldo-inicial">0,00</span></p>
            <p>Saldo Atual: R$ <span id="saldo-atual">0,00</span></p>
            <p>Data de Abertura: <span id="data-abertura">-</span></p>
            <p>Total de Pedidos Hoje: <span id="total-pedidos">0</span></p>
            <p>Total em Vendas: R$ <span id="total-vendas">0,00</span></p>
          </div>
          <button onclick="fecharCaixaDiario()" class="gerente-only">
            Fechar Caixa Diário
          </button>
        </div>

        <!-- Aba de Cardápio -->
        <div id="cardapioTab" class="tab-content">
          <h2>Cardápio</h2>
          <button onclick="adicionarItemCardapioModal()" class="gerente-only">
            Adicionar Item
          </button>
          <div id="cardapioList"></div>
        </div>

        <!-- Aba de Clientes -->
        <div id="clientesTab" class="tab-content">
          <h2>Clientes Cadastrados</h2>
          <button onclick="adicionarClienteModal()" class="atendente-only">
            Adicionar Cliente
          </button>
          <table id="clientesTable">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Telefone</th>
                <th>Endereço</th>
                <th>Pedidos</th>
                <th class="atendente-only">Ações</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Aba de Funcionários -->
        <div id="funcionariosTab" class="tab-content">
          <h2>Funcionários</h2>
          <button onclick="adicionarFuncionarioModal()" class="admin-only">
            Adicionar Funcionário
          </button>
          <table id="funcionariosTable">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Usuário</th>
                <th>Cargo</th>
                <th>Status</th>
                <th class="admin-only">Ações</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Aba de Relatórios -->
        <div id="relatoriosTab" class="tab-content">
          <h2>Relatórios</h2>
          <div class="form-group">
            <label for="relatorioData">Selecione a Data:</label>
            <input type="date" id="relatorioData" />
            <button onclick="gerarRelatorio()">Gerar Relatório</button>
          </div>
          <div id="relatorioResult"></div>
        </div>
      </div>

      <!-- Modal para Abrir/Fechar Caixa -->
      <div id="caixaModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="fecharModal('caixaModal')">&times;</span>
          <h2 id="caixaModalTitle">Abrir Caixa</h2>
          <form id="caixaForm">
            <div class="form-group">
              <label for="valorInicial">Valor Inicial no Caixa (R$)</label>
              <input
                type="number"
                id="valorInicial"
                step="0.01"
                min="0"
                required
              />
            </div>
            <div class="form-actions">
              <button type="button" onclick="fecharModal('caixaModal')">
                Cancelar
              </button>
              <button type="submit" id="caixaSubmit">Abrir Caixa</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal para Adicionar Pedido -->
      <div id="pedidoModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="fecharModal('pedidoModal')"
            >&times;</span
          >
          <h2>Novo Pedido</h2>
          <form id="pedidoForm">
            <div class="form-group">
              <label for="clienteNome">Nome do Cliente</label>
              <input
                type="text"
                id="clienteNome"
                required
                list="clientesList"
              />
              <datalist id="clientesList"></datalist>
            </div>
            <div class="form-group">
              <label for="clienteTelefone">Telefone</label>
              <input
                type="tel"
                id="clienteTelefone"
                placeholder="(00) 00000-0000"
              />
            </div>
            <div class="form-group">
              <label for="clienteEndereco">Endereço (para delivery)</label>
              <input type="text" id="clienteEndereco" />
            </div>
            <div class="form-group">
              <label for="pedidoDescricao">Itens do Pedido</label>
              <select id="pedidoItem" class="pedido-item-select">
                <option value="">Selecione um item</option>
              </select>
              <button type="button" onclick="adicionarItemPedido()">
                Adicionar Item
              </button>
              <div id="itensPedido"></div>
              <input type="hidden" id="pedidoDescricao" required />
            </div>
            <div class="form-group">
              <label for="pedidoValor">Valor Total (R$)</label>
              <input
                type="number"
                id="pedidoValor"
                step="0.01"
                min="0"
                required
                readonly
              />
            </div>
            <div class="form-group">
              <label for="pedidoTipo">Tipo de Pedido</label>
              <select id="pedidoTipo" required>
                <option value="local">No Local</option>
                <option value="delivery">Delivery</option>
                <option value="retirada">Retirada</option>
              </select>
            </div>
            <div class="form-actions">
              <button type="button" onclick="fecharModal('pedidoModal')">
                Cancelar
              </button>
              <button type="submit">Adicionar Pedido</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal para Adicionar Cliente -->
      <div id="clienteModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="fecharModal('clienteModal')"
            >&times;</span
          >
          <h2>Novo Cliente</h2>
          <form id="clienteForm">
            <div class="form-group">
              <label for="novoClienteNome">Nome Completo</label>
              <input type="text" id="novoClienteNome" required />
            </div>
            <div class="form-group">
              <label for="novoClienteTelefone">Telefone</label>
              <input
                type="tel"
                id="novoClienteTelefone"
                placeholder="(00) 00000-0000"
                required
              />
            </div>
            <div class="form-group">
              <label for="novoClienteEndereco">Endereço</label>
              <textarea id="novoClienteEndereco" rows="3"></textarea>
            </div>
            <div class="form-actions">
              <button type="button" onclick="fecharModal('clienteModal')">
                Cancelar
              </button>
              <button type="submit">Salvar Cliente</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal para Adicionar Item ao Cardápio -->
      <div id="cardapioModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="fecharModal('cardapioModal')"
            >&times;</span
          >
          <h2 id="cardapioModalTitle">Novo Item no Cardápio</h2>
          <form id="cardapioForm">
            <div class="form-group">
              <label for="itemNome">Nome do Item</label>
              <input type="text" id="itemNome" required />
            </div>
            <div class="form-group">
              <label for="itemDescricao">Descrição</label>
              <textarea id="itemDescricao" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label for="itemPreco">Preço (R$)</label>
              <input
                type="number"
                id="itemPreco"
                step="0.01"
                min="0"
                required
              />
            </div>
            <div class="form-group">
              <label for="itemCategoria">Categoria</label>
              <select id="itemCategoria" required>
                <option value="entrada">Entrada</option>
                <option value="principal">Prato Principal</option>
                <option value="bebida">Bebida</option>
                <option value="sobremesa">Sobremesa</option>
              </select>
            </div>
            <div class="form-group">
              <label for="itemDisponivel">Disponível</label>
              <input type="checkbox" id="itemDisponivel" checked />
            </div>
            <div class="form-actions">
              <button type="button" onclick="fecharModal('cardapioModal')">
                Cancelar
              </button>
              <button type="submit" id="cardapioSubmit">Salvar Item</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal para Adicionar Funcionário -->
      <div id="funcionarioModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="fecharModal('funcionarioModal')"
            >&times;</span
          >
          <h2 id="funcionarioModalTitle">Novo Funcionário</h2>
          <form id="funcionarioForm">
            <div class="form-group">
              <label for="funcionarioNome">Nome Completo</label>
              <input type="text" id="funcionarioNome" required />
            </div>
            <div class="form-group">
              <label for="funcionarioUsuario">Nome de Usuário</label>
              <input type="text" id="funcionarioUsuario" required />
            </div>
            <div class="form-group">
              <label for="funcionarioSenha">Senha</label>
              <input type="password" id="funcionarioSenha" required />
            </div>
            <div class="form-group">
              <label for="funcionarioCargo">Cargo</label>
              <select id="funcionarioCargo" required>
                <option value="atendente">Atendente</option>
                <option value="gerente">Gerente</option>
                <option value="admin">Administrador</option>
              </select>
            </div>
            <div class="form-group">
              <label for="funcionarioAtivo">Ativo</label>
              <input type="checkbox" id="funcionarioAtivo" checked />
            </div>
            <div class="form-actions">
              <button type="button" onclick="fecharModal('funcionarioModal')">
                Cancelar
              </button>
              <button type="submit" id="funcionarioSubmit">
                Salvar Funcionário
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
